# Autonomous Mecanum Robot Configuration
# Raspberry Pi 5 + Raspberry Pi Pico

# UART Communication (Pi5 <-> Pico)
uart:
  port: /dev/ttyAMA3     # UART3 on Pi5
  baudrate: 115200
  protocol: stx_etx      # Protocol with STX/ETX and CRC-8

# UART3 pins on Pi5
# GPIO8 (pin 24) = TX → GP1 (Pico RX)
# GPIO9 (pin 21) = RX ← GP0 (Pico TX)
# GND (pin 20) = GND

# Mecanum motor configuration
# Driver board: HW-249 (4x H-bridge)
motors:
  type: mecanum
  pwm_frequency: 1000    # Hz
  max_speed: 100         # %
  driver: hw249

  # Wheel layout (top view)
  #   FL ──── FR
  #   │  ↑   │
  #   │ FRONT│
  #   RL ──── RR

  pins:
    # Front Left
    FL_in1: 17           # GPIO17 - forward
    FL_in2: 27           # GPIO27 - backward

    # Front Right
    FR_in1: 22           # GPIO22 - forward
    FR_in2: 23           # GPIO23 - backward

    # Rear Left
    RL_in1: 24           # GPIO24 - forward
    RL_in2: 25           # GPIO25 - backward

    # Rear Right
    RR_in1: 5            # GPIO5 - forward
    RR_in2: 6            # GPIO6 - backward

# LiDAR RPLidar C1 (USB)
lidar:
  port: /dev/ttyUSB0
  baudrate: 460800
  min_quality: 10

# Autonomous navigation and patrol
navigation:
  waypoint_radius: 3.0   # meters - waypoint validation radius
  patrol_speed: 40       # % max speed during patrol
  obstacle_distance: 800 # mm - avoidance distance
  patrol_file: config/patrol_route.json
  loop: true             # loop the patrol
  pid:
    kp: 1.0
    ki: 0.05
    kd: 0.1

# Authentication and TLS: see config/secrets.yaml
# (file ignored by git, copy secrets.yaml.example to get started)

# Web server (telemetry + control)
telemetry:
  web_server_port: 8085
  update_rate: 10        # Hz
  enable_logging: true

# Sensors (on Pico)
sensors:
  gps:
    type: neo_6m
    uart: 0              # Pico UART0
    baudrate: 9600
  imu:
    type: bmi160
    i2c_bus: 1           # Pico I2C1
    address: 0x68
